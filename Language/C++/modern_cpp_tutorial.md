# Morden cpp tutorial

## ç¬¬2ç«  è¯­è¨€å¯ç”¨æ€§çš„å¼ºåŒ–

1. å¸¸é‡
	1. `nullptr`æ›¿ä»£`NULL`
	2. `constexpr`å£°æ˜å¸¸é‡è¡¨è¾¾å¼ï¼Œ`constexpr`çš„å‡½æ•°å¯ä»¥ä½¿ç”¨é€’å½’ã€‚ä»C++14å¼€å§‹ï¼Œ`constexpr`å‡½æ•°å¯ä»¥åœ¨å†…éƒ¨ä½¿ç”¨å±€éƒ¨å˜é‡ã€å¾ªç¯å’Œåˆ†æ”¯ç­‰ç®€å•è¯­å¥ã€‚
2. å˜é‡åŠå…¶åˆå§‹åŒ–
	1. C++17å¼€å§‹ï¼Œå¯ä»¥åœ¨ if/switch çš„æ¡ä»¶è¯­å¥ä¸­å£°æ˜å˜é‡
	2. åˆå§‹åŒ–åˆ—è¡¨
		* ä¼ ç»ŸC++ï¼š
		  	1. æ•°ç»„ã€PODï¼ˆPlain Old Dataï¼‰å¯ä»¥ä½¿ç”¨`{}`è¿›è¡Œåˆå§‹åŒ–
		  	2. ç±»å¯¹è±¡ï¼šæ‹·è´æ„é€ å‡½æ•° æˆ– `()`è¿›è¡Œåˆå§‹åŒ–
		* C++ 11ï¼š
		  	1. ç»Ÿä¸€è¯­æ³•åˆå§‹åŒ–`{}`

		  		`Foo foo{3, 4};`
		  	2. åˆå§‹åŒ–åˆ—è¡¨æ„é€ å‡½æ•°.

		  		```
		  		MagicFoo(std::initializer_list<int> list) {
        			for (std::initializer_list<int>::iterator it = list.begin();
             			it != list.end(); ++it)
            			vec.push_back(*it);
    			}
    			MagicFoo magicFoo = {1, 2, 3, 4, 5};
		  		```
		  	3. æ™®é€šå‡½æ•°å‚æ•°

			  	```
				void foo(std::initializer_list<int> list) {
	     			for (std::initializer_list<int>::iterator it = list.begin();
	     			it != list.end(); ++it) {
	     				vec.push_back(*it);
	     			}
			   }

				magicFoo.foo({6,7,8,9});
				```
	3. ç»“æ„åŒ–ç»‘å®š

		```
		std::tuple<int, double, std::string> f() {
		    return std::make_tuple(1, 2.3, "456");
		}

		int main() {
		    auto [x, y, z] = f();
		    std::cout << x << ", " << y << ", " << z << std::endl;
		    return 0;
		}
		```
3. ç±»å‹æ¨å¯¼
	1. auto: è‡ªåŠ¨æ¨å¯¼å˜é‡ç±»å‹
		1. ä¸èƒ½ç”¨äºå‡½æ•°å½¢å‚
		2. ä¸èƒ½ç”¨äºæ¨å¯¼æ•°ç»„ç±»å‹
	2. decltype: è‡ªåŠ¨æ¨å¯¼è¡¨è¾¾å¼ç±»å‹

		`decltype(è¡¨è¾¾å¼)`
	3. å°¾è¿”å›ç±»å‹æ¨å¯¼.

	   C++11å¼•å…¥å°¾è¿”å›ç±»å‹
	   C++14å¯ä»¥ç›´æ¥è®©æ™®é€šå‡½æ•°å…·å¤‡è¿”å›å€¼æ¨å¯¼

		```
		// C++11
		template<typename T, typename U>
			auto add2(T x, U y) -> decltype(x+y){
    		return x + y;
		}

		// C++14
		template<typename T, typename U>
		auto add3(T x, U y){
    		return x + y;
		}
		```
	4. decltype(auto)
4. æ§åˆ¶æµ
	1. if constexpr: ä»£ç åœ¨ç¼–è¯‘æ—¶åˆ¤æ–­æ˜¯å¦æ˜¯å¸¸é‡è¡¨è¾¾å¼
	2. range for

		```
		for (auto element : vec)
	        std::cout << element << std::endl; // read only
	    for (auto &element : vec) {
	        element += 1;                      // writeable
	    }
		```
5. æ¨¡æ¿
	1. æ¨¡æ¿æ˜¾å¼å®ä¾‹åŒ–

		```
		template class std::vector<bool>;          // å¼ºè¡Œå®ä¾‹åŒ–
		extern template class std::vector<double>; // ä¸åœ¨è¯¥å½“å‰ç¼–è¯‘æ–‡ä»¶ä¸­å®ä¾‹åŒ–æ¨¡æ¿
		```
	2. å°–æ‹¬å·â€œ>â€: C++11å¼€å§‹ï¼Œå¯ä»¥è¿ç»­å³å°–æ‹¬å·
	3. usingï¼š typedefæ— æ³•ä¸ºæ¨¡æ¿å®šä¹‰åˆ«åï¼Œå› ä¸ºâ€œæ¨¡æ¿æ˜¯ç”¨æ¥äº§ç”Ÿç±»å‹çš„ï¼Œæœ¬èº«å¹¶ä¸æ˜¯ä¸€ç§ç±»å‹â€
	4. é»˜è®¤æ¨¡æ¿å‚æ•°ï¼š C++ 11å¯ä»¥æŒ‡å®šæ¨¡æ¿çš„é»˜è®¤å‚æ•°

		```
		template<typename T = int, typename U = int>
		auto add(T x, U y) -> decltype(x+y) {
		    return x+y;
		}
		```
	5. å˜é•¿å‚æ•°æ¨¡æ¿
		1. å®šä¹‰

			`template<typename... Ts> class Magic;`
		2. è·å–å‚æ•°ï¼š
			1. ä½¿ç”¨sizeof...è·å–é•¿åº¦
			2. å¯¹å‚æ•°è§£åŒ…
				1. é€’å½’

					```
					// C++ 17
					template<typename T0, typename... T>
					void printf(T0 t0, T... t) {
					    std::cout << t0 << std::endl;
					    if constexpr (sizeof...(t) > 0) printf(t...);
					}
					```
				2. åˆå§‹åŒ–åˆ—è¡¨å±•å¼€
		3. æŠ˜å è¡¨è¾¾å¼ï¼ˆC++17ï¼‰

			```
			#include <iostream>
			template<typename ... T>
			auto sum(T ... t) {
			    return (t + ...);
			}
			int main() {
			    std::cout << sum(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) << std::endl;
			}
			```
6. é¢å‘å¯¹è±¡
	1. å§”æ‰˜æ„é€ ï¼š æ„é€ å‡½æ•°å¯ä»¥è°ƒç”¨åŒä¸€ä¸ªç±»ä¸­çš„å¦ä¸€ä¸ªæ„é€ å‡½æ•°
	2. ç»§æ‰¿æ„é€ ï¼šC++ 11åˆ©ç”¨å…³é”®å­—usingå¼•å…¥ç»§æ‰¿æ„é€ å‡½æ•°
	3. æ˜¾å¼è™šå‡½æ•°é‡è½½
		1. override: é‡è½½è™šå‡½æ•°
		2. final
			* é˜²æ­¢ç±»è¢«ç»§ç»­ç»§æ‰¿
			* é˜²æ­¢è™šå‡½æ•°ç»§ç»­é‡è½½
	4. æ˜¾å¼ç¦ç”¨é»˜è®¤å‡½æ•°
		1. defaultï¼š æ˜¾å¼å£°æ˜ä½¿ç”¨ç¼–è¯‘å™¨ç”Ÿæˆçš„å‡½æ•°
		2. deleteï¼š æ˜¾å¼å£°æ˜æ‹’ç»ç¼–è¯‘å™¨ç”Ÿæˆçš„å‡½æ•°
	5. å¼ºç±»å‹æšä¸¾

		```
		enum class new_enum : unsigned int {
		    value1,
		    value2,
		    value3 = 100,
		    value4 = 100
		};
		```

## ç¬¬3ç«  è¯­è¨€è¿è¡ŒæœŸçš„å¼ºåŒ–

1. Lambdaè¡¨è¾¾å¼
	1. å€¼æ•è·
		1. å˜é‡è¦å¯æ‹·è´
		2. è¢«æ•è·çš„å˜é‡åœ¨lambdaè¡¨è¾¾å¼è¢«åˆ›å»ºæ—¶æ‹·è´ï¼Œè€Œéè°ƒç”¨æ—¶æ‰æ‹·è´
	2. å¼•ç”¨æ•è·ï¼šå¼•ç”¨æ•è·ä¿å­˜çš„æ˜¯å¼•ç”¨ï¼Œå€¼ä¼šå‘ç”Ÿå˜åŒ–
	3. éšå¼æ•è·ï¼šå¯åœ¨æ•è·åˆ—è¡¨å†™ä¸€ä¸ª`&`æˆ–`=`å‘ç¼–è¯‘å™¨å£°æ˜é‡‡ç”¨`å¼•ç”¨æ•è·`æˆ–`å€¼æ•è·`
	4. è¡¨è¾¾å¼æ•è·
	5. æ³›å‹Lambdaï¼šä»C++14å¼€å§‹ï¼ŒLambdaå‡½æ•°çš„å½¢å¼å‚æ•°å¯ä»¥ä½¿ç”¨`auto`å…³é”®å­—æ¥äº§ç”Ÿæ„ä¹‰ä¸Šçš„æ³›å‹ã€‚

		```
		auto add = [](auto x, auto y) {
			return x + y;
		};
		add(1, 2);
		add(1.1, 2.2);
		```
2. å‡½æ•°å¯¹è±¡åŒ…è£…å™¨
	1. std::function: å°†èƒ½å¤Ÿè¢«è°ƒç”¨çš„å¯¹è±¡çš„ç±»å‹ï¼Œç»Ÿä¸€ç§°ä¸ºå¯è°ƒç”¨ç±»å‹ã€‚

		```
		int foo(int para) {
			return para;
		}

		int main() {
			// å¤„ç†å‡½æ•°
			std::function<int(int)> func = foo;

			// å¤„ç†lamdaå‡½æ•°
			int important = 10;
			std::function<int(int)> func2 = [&](int value) -> int {
				return 1 + value + important;
			}
		}
		```
	2. std::bind/std::placeholder: å°†éƒ¨åˆ†è°ƒç”¨å‚æ•°æå‰ç»‘å®šåˆ°å‡½æ•°ä¸Šï¼Œå½¢æˆä¸€ä¸ªæ–°çš„å…‘ç°ã€‚

		```
		int foo(int a, int b, int c) {
			return a + b + c;
		}

		int main() {
			// å°†å‚æ•°1ï¼Œ2ç»‘å®šåˆ°fooä¸Šï¼Œä½¿ç”¨placeholderå¯¹ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œå ä½
			auto bindFoo = std::bind(foo, std::placeholder::_1, 1, 2);
			// è°ƒç”¨bindFooï¼Œåªéœ€æä¾›ç¬¬ä¸€ä¸ªå‚æ•°
			bindFoo(1);
		}
		```
	3. å³å€¼å¼•ç”¨
		1. ä¸ºäº†æ”¯æŒç§»åŠ¨æ“ä½œï¼Œå¼•å…¥å³å€¼å¼•ç”¨ã€‚
		2. æ‰€è°“å³å€¼å¼•ç”¨ï¼Œå°±æ˜¯å¿…é¡»ç»‘å®šåˆ°å³å€¼çš„å¼•ç”¨ã€‚ä½¿ç”¨`&&`è€Œä¸æ˜¯`&`æ¥è·å¾—å³å€¼å¼•ç”¨ã€‚
		3. å³å€¼å¼•ç”¨åªèƒ½ç»‘å®šåˆ°ä¸€ä¸ªå°†è¦é”€æ¯çš„å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥è‡ªç”±åœ°å°†å³å€¼å¼•ç”¨çš„èµ„æºâ€œç§»åŠ¨â€åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚
		4. å·¦å€¼å¼•ç”¨ä¸èƒ½ç»‘å®šåˆ°è¦æ±‚è½¬æ¢çš„è¡¨è¾¾å¼ã€å­—é¢å¸¸é‡æˆ–è¿”å›å³å€¼çš„è¡¨è¾¾å¼ã€‚å³å€¼å¼•ç”¨å¯ä»¥ç»‘å®šåˆ°è¿™ç±»è¡¨è¾¾å¼ä¸Šï¼Œä½†æ˜¯ä¸èƒ½å°†å³å€¼å¼•ç”¨ç›´æ¥ç»‘å®šåˆ°ä¸€ä¸ªå·¦å€¼ä¸Šã€‚
		5. å·¦å€¼å…·æœ‰æŒä¹…çš„çŠ¶æ€ï¼Œå³å€¼è¦ä¹ˆæ˜¯å­—é¢å¸¸é‡ï¼Œè¦ä¹ˆæ˜¯è¡¨è¾¾å¼æ±‚å€¼è¿‡ç¨‹ä¸­åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡ã€‚
		6. std::moveå‘Šè¯‰ç¼–è¯‘å™¨ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªå·¦å€¼ï¼Œä½†æˆ‘ä»¬å¸Œæœ›åƒä¸€ä¸ªå³å€¼ä¸€æ ·å¤„ç†å®ƒã€‚
			`int &&rr3 = std::move(rr1);`
		7. å¯ä»¥é”€æ¯ä¸€ä¸ªç§»åæºå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥èµ‹äºˆæ–°å€¼ï¼Œä½†ä¸èƒ½è¯»å–å®ƒçš„å€¼ã€‚
